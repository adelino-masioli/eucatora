function functionSave(e,t,a){return $(e).ajaxForm({success:function(o){1==o.status?(notifyAlerts(o.response,"fa fa-check","success"),"reset"==$("#formreset").val()&&(resetForm(e),$("input").tagsinput("refresh"),$("input").tagsinput("destroy"),$("select").selectpicker("refresh")),o.content&&((t||a)&&divHideShow(t,a),o.midias?showContentDataMidia(o.midias):showContentData(o.content)),$(":file").filestyle("clear")):notifyAlerts(o.response,"fa fa-exclamation-circle","danger")},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1},type:"post",dataType:"json",url:$(e).attr("action")}).submit(),!1}function confirmActionDestroy(e){var t=$("#urlaction").html(),a=$("#msgaction").html(),o=$("#sizection").html();bootbox.confirm({size:o,message:a,callback:function(a){if(1==a){if(""==e)return!1;functionDestroy(t,e)}},buttons:{confirm:{label:"Confirmar"},cancel:{label:"Cancelar",className:"btn-danger"}}})}function functionDestroy(e,t){return $.ajax({type:"POST",url:e,data:{id:t,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-check","success"),funcionRefreshDatatable()):notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1}}),!1}function functionDuplicate(e){var t=$(".datatable tbody tr td #"+e).attr("id"),a=$(".datatable tbody tr td #"+e).attr("data_url");return $.ajax({type:"POST",url:a,data:{id:t,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-check","success"),funcionRefreshDatatable()):notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1}}),!1}function functionDestroyImage(e,t,a,o){return $.ajax({type:"POST",url:e,data:{id:t,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-check","success"),divHideShow(a,o),0==obj.count&&showNoResult("#showResult")):notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1}}),!1}function functionDefaultImage(e,t,a,o){return $.ajax({type:"POST",url:e,data:{id:t,transaction:o,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-check","success"),$(".btndefault").removeClass("btn-success"),$(".btndefault").addClass("btn-default"),$(".btndefault i").removeClass("fa-thumbs-o-up"),$(".btndefault i").addClass("fa-thumbs-o-down"),$(a).removeClass("btn-default"),$(a).addClass("btn-success"),$(a+" i").removeClass("fa-thumbs-o-down"),$(a+" i").addClass("fa-thumbs-o-up"),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)}}),!1}function functionDefineCategory(e,t,a,o){return $.ajax({type:"POST",url:e,data:{category_id:t,product_id:o,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-check","success"),0==obj.action?$(a).removeClass("list-group-item-info"):$(a).addClass("list-group-item-info"),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)}}),!1}function showContentDataMidia(e){if("false"!=e){$("#showResult").html("");var t="",a="",o="",r="",s="";return e?($.each(e,function(e,n){a="yes"==n.is_thumb?"btn-success":"btn-default",o="yes"==n.is_thumb?"fa-thumbs-o-up":"fa-thumbs-o-down",r="#img_"+n.id,s="#btnimg_"+n.id,t+='<div class="col-lg-2" id="img_'+n.id+'">',t+='<div class="thumbnail">',t+='<div class="thumbheight"><img class="img-responsive" src="'+$("#baseurl").val()+"/"+n.path+"/thumb/200_"+n.image+'" alt="'+n.name+'"></div>',t+='<div class="caption">',t+='<div class="btn-group btn-group-justified" role="group" aria-label="btn-midias">',t+='<div class="btn-group" role="group">',t+='<button type="button" class="btn btndefault '+a+'" id="btnimg_'+n.id+'" onclick="functionDefaultImage(\''+$("#pathdefault").val()+"', '"+n.id+"', '"+s+"', '"+$("#transaction").val()+'\');"><i class="fa '+o+'" aria-hidden="true"></i> Principal</button>',t+="</div>",t+='<div class="btn-group" role="group">',t+='<button type="button" class="btn btn-danger" onclick="functionDestroyImage(\''+$("#pathdestroy").val()+"', '"+n.id+"', null, '"+r+'\');"><i class="fa fa-trash" aria-hidden="true"></i> Excluir</button>',t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>"}),$("#showResult").append(t)):showNoResult("#showResult"),!1}}function searchCEP(e,t){$.ajax({type:"GET",url:e+"/"+$(t).val()}).done(function(e){e&&($("#fields_address input").empty(),obj=JSON.parse(e),$("#neighborhood").val(obj.bairro),$("#address").val(obj.logradouro),$("#complement").val(obj.complemento))})}function functionSearchProduct(e){return(""!=$("#product_sku").val()||""!=$("#product_name").val())&&($.ajax({type:"POST",url:e,data:{sku:$("#product_sku").val(),name:$("#product_name").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?($("#result-search-product input").empty(),$("#product_id").val(obj.id),$("#product_sku").val(obj.sku),$("#product_name").val(obj.name),$("#product_price").val(obj.price),$("#product_amount").val(1),2==obj.image?($("#thumbnailproduct").fadeOut(1e3),setTimeout(function(){$("#thumbnailproduct").removeClass("thumbnail"),$("#thumbnailproduct").empty()},1200)):($("#thumbnailproduct").hide(),$("#thumbnailproduct").addClass("thumbnail"),$("#thumbnailproduct").html('<img src="'+obj.image+'" class="img-responsive">'),$("#thumbnailproduct").fadeIn(1e3)),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)}}),!1)}function removeImage(e){$(e).empty(),$(e).removeClass("thumbnail")}function functionAddItem(e){return $.ajax({type:"POST",url:e,data:{product_id:$("#product_id").val(),amount:$("#product_amount").val(),transaction:$("#transaction").val(),order_id:$("#order_id").val(),_token:$("#_token").val()},success:function(e){if(obj=JSON.parse(e),1==obj.status){if(notifyAlerts(obj.response,"fa fa-exclamation-circle","success"),obj.itens){var t="",a="#tableitens";return $("#tableitens #showitens").html(""),$.each(obj.itens,function(e,o){t+='<tr id="'+o.id+'">',t+='<td class="text-center">'+o.sku+"</td>",t+='<td class="text-left">'+o.name+"</td>",t+='<td class="text-center">'+o.qtd+"</td>",t+='<td class="col-lg-1 text-right">'+o.price+"</td>",t+='<td class="col-lg-1 text-right">'+o.subtotal+"</td>",t+='<td class="text-center"><button class="btn btn-xs btn-danger" onclick="functionRemoveItem(\''+$("#pathdestroy").val()+"', '"+o.id+"', '"+a+"');\">Excluir</button></td>",t+="</tr>"}),$("#tableitens #showitens").append(t),$("#subtotal").html(obj.total),$("#payment_value").val(obj.total),$("#btnorderfootpayment, #btnorderfootshipping, #btnorderfootfinish").removeClass("disabled"),!1}return!1}return notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function functionRemoveItem(e,t,a){return $.ajax({type:"POST",url:e,data:{id:t,order_id:$("#order_id").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-exclamation-circle","success"),$(a+" tbody tr#"+t).fadeOut(),$("#subtotal").html(obj.total),$("#payment_value").val(obj.total),0==obj.qtd&&$("#btnorderfootpayment, #btnorderfootshipping, #btnorderfootfinish").addClass("disabled"),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function functionSearchCustomer(e){return $.ajax({type:"POST",url:e,data:{search:$("#search").val(),_token:$("#_token").val()},success:function(e){if(obj=JSON.parse(e),obj.result){var t="";return $("#listcustomer").html(""),t+='<li class="liheader">',t+='<span class="col-lg-2 text-center"><strong>ID</strong></span>',t+='<span class="col-lg-10 text-center"><strong>NOME</strong></span>',t+="</li>",$.each(obj.result,function(e,a){t+='<li id="licontentactive" class="licontent_'+a.id+'"  onclick="functionSelectCustomer(\''+a.id+"', '"+a.name+"', '"+a.address+", "+a.number+" - "+a.neighborhood+" - "+a.zipcode+" - "+a.complement+"');\">",t+='<span class="col-lg-2 text-center">'+a.id+"</span>",t+='<span class="col-lg-10 text-left">'+a.name+"</span>",t+="</li>"}),$("#listcustomer").append(t),!1}return notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function functionSelectCustomer(e,t,a){return $("#listcustomer li").removeClass("active"),$("#listcustomer li.licontent_"+e).addClass("active"),$("#customer_id").val(e),$("#customer_name").val(t),$("#shipping_address").val(a),!1}function functionConfirmCustomer(e){return $.ajax({type:"POST",url:e,data:{id:$("#customer_id").val(),name:$("#customer_name").val(),transaction:$("#transaction").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-exclamation-circle","success"),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function searchProvider(e){var t=$("#provider_id").val();return $.ajax({type:"POST",url:e,data:{id:t,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?($("#id").empty(),$("#phone").empty(),$("#celullar").empty(),$("#zipcode").empty(),$("#address").empty(),$("#neighborhood").empty(),$("#city").empty(),$("#uf").empty(),$.each(obj.result,function(e,t){$("#id").val(t.id),$("#phone").val(t.phone),$("#celullar").val(t.celullar),$("#zipcode").val(t.zipcode),$("#address").val(t.address),$("#neighborhood").val(t.neighborhood),$("#city").val(t.city),$("#uf").val(t.uf)}),$("#provider_id").selectpicker("refresh")):(resetForm("#frmPurchase"),notifyAlerts(obj.response,"fa fa-exclamation-circle","danger")),!1}}),!1}function functionSavePurchase(e){return $(e).ajaxForm({success:function(e){1==e.status?(notifyAlerts(e.response,"fa fa-check","success"),e.url&&window.location.replace(e.url)):notifyAlerts(e.response,"fa fa-exclamation-circle","danger")},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1},type:"post",dataType:"json",url:$(e).attr("action")}).submit(),!1}function addItemPurchase(e){return $.ajax({type:"POST",url:e,data:{product_id:$("#product_id").val(),price:$("#price").val(),area:$("#area").val(),meters_square:$("#meters_square").val(),meters_stereo:$("#meters_stereo").val(),purchase_id:$("#purchase_id").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(obj.result&&updatePurchaseItensTable(obj),resetForm("#frmPurchase"),$("select").selectpicker("refresh"),notifyAlerts(obj.response,"fa fa-check","success")):notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function destroyItemPurchase(e,t){return $.ajax({type:"POST",url:e,data:{id:t,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(obj.result&&updatePurchaseItensTable(obj),notifyAlerts(obj.response,"fa fa-check","success")):notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function updatePurchaseItensTable(e){$("#showResult").html("");var t="";$.each(e.result,function(e,a){t+="<tr>",t+='<td class="col-md-1 text-center"><a href="javascript:void(0);" onclick="destroyItemPurchase(\''+$("#pathdestroy").val()+"', '"+a.id+'\');" class="btn btn-danger btn-xs"><i class="fa fa-trash" aria-hidden="true"></i></a></td>',t+='<td class="col-md-1 text-center">'+a.id+"</td>",t+='<td class="col-md-6 text-left">'+a.name+"</td>",t+='<td class="col-md-1 text-center">'+a.area+"</td>",t+='<td class="col-md-1 text-center">'+a.meters_square+"</td>",t+='<td class="col-md-1 text-center">'+a.meters_stereo+"</td>",t+='<td class="col-md-1 text-center">'+a.price+"</td>",t+="</tr>"}),$("#showResult").append(t)}function addTaxePurchase(e){return $.ajax({type:"POST",url:e,data:{description:$("#description_tax").val(),price:$("#price_tax").val(),purchase_id:$("#purchase_id").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(obj.result&&updatePurchaseTaxesTable(obj),resetForm("#frmPurchase"),notifyAlerts(obj.response,"fa fa-check","success")):notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function destroyTaxePurchase(e,t){return $.ajax({type:"POST",url:e,data:{id:t,_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(obj.result&&updatePurchaseTaxesTable(obj),notifyAlerts(obj.response,"fa fa-check","success")):notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function updatePurchaseTaxesTable(e){$("#showResultTax").html("");var t="";$.each(e.result,function(e,a){t+="<tr>",t+='<td class="col-md-1 text-center"><a href="javascript:void(0);" onclick="destroyTaxePurchase(\''+$("#pathdestroytaxe").val()+"', '"+a.id+'\');" class="btn btn-danger btn-xs"><i class="fa fa-trash" aria-hidden="true"></i></a></td>',t+='<td class="col-md-8 text-left">'+a.description+"</td>",t+='<td class="col-md-1 text-center">'+a.price+"</td>",t+="</tr>"}),$("#showResultTax").append(t)}function functionAddShipping(e){return $.ajax({type:"POST",url:e,data:{order_id:$("#order_id").val(),transaction:$("#transaction").val(),description:$("#shipping_description").val(),address:$("#shipping_address").val(),value:$("#shipping_value").val(),date:$("#shipping_date").val(),time:$("#shipping_time").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-exclamation-circle","success"),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function functionAddPayment(e){return $.ajax({type:"POST",url:e,data:{order_id:$("#order_id").val(),transaction:$("#transaction").val(),description:$("#payment_description").val(),value:$("#payment_value").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-exclamation-circle","success"),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function functionFinishOrder(e){return $.ajax({type:"POST",url:e,data:{order_id:$("#order_id").val(),transaction:$("#transaction").val(),_token:$("#_token").val()},success:function(e){return obj=JSON.parse(e),1==obj.status?(notifyAlerts(obj.response,"fa fa-exclamation-circle","success"),$("#btnneworder").removeClass("disabled").removeClass("btn-default").addClass("btn-primary"),$("#btnorders").removeClass("disabled").removeClass("btn-default").addClass("btn-info"),$("#btnconfirmorder").addClass("disabled").removeClass("btn-success").addClass("btn-default").removeAttr("onclick"),$("#btnconfirmclose").addClass("disabled").removeAttr("data-dismiss"),$(".blockorder").fadeIn(),$("#msgsucces").fadeIn(),$("#msgsucces p").html('<i class="fa fa-check-circle" aria-hidden="true"></i> '+obj.response),!1):(notifyAlerts(obj.response,"fa fa-exclamation-circle","danger"),!1)},error:function(e){return notifyAlerts(formatErrors(e.responseJSON),"fa fa-exclamation-circle","info"),!1}}),!1}function showNoResult(e){$(e).html('<div class="col-lg-12 text-center" id="noresult"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Nenhum registro cadastrado.</div>')}function divHideShow(e,t){$(t).hide(),$(e).show(),$(e).removeClass("hidden"),$(t+" img").remove()}function showContentData(e){$(".btn-trash-image").removeClass("hidden"),$(".divdatacontent").html('<img src="'+e+'" width="100%"/>')}function notifyAlerts(e,t,a){$.notify({icon:t,message:e,animate:{enter:"animated zoomInDown",exit:"animated zoomOutUp"}},{type:a})}function resetForm(e){$(e).each(function(){this.reset()})}function formatErrors(e){var t=e;for(var a in t)return t[a][0]}function onlyNumber(e){$(e).on("keypress input",function(){var e=$(this).val();e=e.replace(/\D+/,""),$(this).val(e)})}function showHiden(e){$(e).hasClass("show")?($(e).fadeOut(),$(e).removeClass("show")):($(e).fadeIn(),$(e).addClass("show"))}function changeMask(e){1==e?($("#document").mask("999.999.999-99",{reverse:!0}),$("#document").removeAttr("disabled")):($("#document").mask("99.999.999/9999-99",{reverse:!0}),$("#document").removeAttr("disabled"))}function changeMaskInput(){"cpf"==$("input[name=document_type]:checked").val()?$("#document").mask("999.999.999-99",{reverse:!0}):$("#document").mask("99.999.999/9999-99",{reverse:!0})}$(document).ready(function(){$(":file").filestyle({buttonName:"btn-primary",buttonText:"Selecione",placeholder:"Selecione um arquivo",icon:!1})}),$(".modal").modal({show:!1,backdrop:"static",keyboard:!1}),$(".input_datapicker").datepicker({format:"dd/mm/yyyy"}),$(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"}),$('[data-title="tooltip"]').tooltip({container:"body"})}),$("input").attr("autocomplete","off"),$(window).resize(function(){$("#resize-pdv-products, #resize-pdv-itens").height($(window).height()-90)}),$(window).trigger("resize"),$(".modal").each(function(e){$(this).on("show.bs.modal",function(e){var t=$(this).attr("data-easein");"shake"==t?$(".modal-dialog").velocity("callout."+t):"pulse"==t?$(".modal-dialog").velocity("callout."+t):"tada"==t?$(".modal-dialog").velocity("callout."+t):"flash"==t?$(".modal-dialog").velocity("callout."+t):"bounce"==t?$(".modal-dialog").velocity("callout."+t):"swing"==t?$(".modal-dialog").velocity("callout."+t):$(".modal-dialog").velocity("transition."+t)})});